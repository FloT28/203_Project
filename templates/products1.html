<!DOCTYPE html> 
<html> 
    <head> 
        <title>Shopping Cart / Products</title>
    </head>

<style>

</style>

<body> 
    
    <!--Background color for Page-->
    <body style="background-color: #FBFaF4;">

    <!--HOME PAGE-->
    <button type="Home">
        <img src="https://i.postimg.cc/YCxzshhT/Logo.png" onclick="window.location.href = '/'" alt="Home" border="0" width="190" height="50"/>
    </button>
 
 
    <!--SEARCH BAR-->
    <input type="search" placeholder="Search">
    <button>
        <image src="https://i.postimg.cc/J4wVtw6K/search.png" width="50" height="50"></image>
    </button> 
 
    <!--Product / Cart Page-->
    <button>
        <image src="https://i.postimg.cc/4yXxpjjq/products-icon.png" width="120" height="100"></image>
    </button>

    <!-- SIGN-UP/SIGN IN --> 
    <button type="Sign-in,Sign-up">
        <img src="https://i.postimg.cc/x1DFFpBg/sign-up-sign-in.jpg" alt="buttonpng" border="0" width="80" height="50"/>
    </button>

    <!--CONTACT PAGE-->
    <button type="contact us" >
        <img src="https://i.postimg.cc/t4P239Qv/contact-icon.png" onclick="window.location.href = '/contact_us'" width="80" height="70">
    </button>

    <!-- CART PAGE -->
    <button type="Cart_page">
        <img src="https://i.postimg.cc/Czxb6JbP/checkout-icon.png" onclick="window.location.href = '/cart' ; " alt="buttonpng" border="0" width="80" height="70" />
    </button>

    <br>
    <!--Line to seperate navigation bar-->
    <hr width="100%" size="5" color="lightgray" noshade="">
    <br>

    
    <div>
        {% with messages = get_flashed_messages() %}
          {% for message in messages %}
              <ul class="flashes">
                {% for message in messages %}
                <li>{{ message }}</li>
              </ul>
              {% endfor %}
            {% endwith %}
    </div>

    <div id="shopping-cart">
        <div class="txt-heading">Shopping Cart</div>
        {% if 'cart_item' in session %}
            <a id="btnEmpty" href="{{url_for('.empty_cart')}}">Empty Cart</a>
            <table class="tbl-cart" cellpadding="10" cellspacing="1"></table>
            <tbody>
                <tr>
                    <th style="text-align:left;">Product Name:</th>
                    <th style="text-align:left;">Code:</th>
                    <th style="text-align:right;"width="5%">Quantity</th>
                    <th style="text-align:right;"width="10%">Unit Price</th>
                    <th style="text-align:right;" width="10%">Price</th>
                    <th style="text-align:center;" width="5%">Remove!</th>
                </tr>
                {% for key, val in session['cart_item'].items() %}
                    {% set quantity = session['cart_item'][key]['quantity'] %}
                    {% set price=session['cart_item'][key]['code'] %}
                    {% set item_price = session['cart_item'][key]['total_price'] %}

                    <tr>
                        <td><img src="/static/images/Shoes/{{session['cart_item'][key]['image']}}" class="cart-item-image"/>
            {{session['cart_item'][key]['name'] }}</td>
                        <td>{{session['cart_item'][key] }}</td>
                        <td style="text-align:right;">{{ quantity }}</td>
                        <td style="text-align: right;">${{ price }}</td>
                        <td style="text-align:right;">${{ item_price }}</td>
                        <td style="text-align:center;">
                            <a href="{{url_for('.delete_product',code=session['cart_item'][key][code])}}">
                                <img src="/static/images/Shoes/delete/delete_icon.jpg" alt="Remove item"/>
                            </a>
                        </td>
                    </tr>
                {% endfor %}
                <tr>
                    <td colspan="2" align="right">Total:</td>
                    <td align="right">{{session['all_total_quantity']}}</td>
                    <td align="right" colspan="2"><strong>${{session['all_total_price']}}</strong></td>
                </tr></td>
            </tbody>
        </table>
        {% else: %}
            <div class="no-records">Your Cart is Empty!</div>
        {% endif %}
    </div>
    
    <div id="product grid">
        <!--Products card for each shoe product-->
        <div class="txt-heading">Products</div>
        
        {% for product in products %}
         
            <div class="product-item">
                <form method="post" action="/add">
                    <div class="product-image"><img src="/static/images/Shoes/{{ product.image}}"</div>
                    <div class="product-title-footer">
                        <div class="product-title">{{product.name}}</div>
                        <div class="product-price">${{product.price}}</div>
                        <div class="cart-action">
                            <input type="hidden" name="code" value="{{product.code}}"/>
                            <input type="text" class="product_quantity" name="quantity" value="1" size="2"/>
                            <input type="submit" value="Add to Cart" class="btnAddAction"/>
                        </div>
                    </div>
                </form>
            </div>

        {% endfor %}
    </div>
</body>    
</html>